profiles {

    standard {
        executor {
    		name   = 'local'
    		cpus   = 1
    		memory = '2G'
	}
		singularity.enabled = true
		singularity.cacheDir = "$PWD"
		singularity.autoMounts = true
	    singularity.pullTimeout = '40 min'
		singularity.cacheDir = "."
    }

    slurm {
	    process.errorStrategy ='finish' 
		process.executor = 'slurm'
		executor.queueSize = 50
	    process.time = '2d'
		singularity.enabled = true
		singularity.autoMounts = true
	    singularity.pullTimeout = '40 min'
		singularity.cacheDir="."
		singularity.runOptions = '-B `pwd -P`'
		process.container = 'atac_align.img'
		process {
		    withLabel: multi_big_mem {
				executor = 'slurm'
				memory = '20G'
	            cpus =16 
				time = '12h'
	    	   }
		    withLabel: big_mem {
				executor = 'slurm'
				memory = '20G'
				time = '12h'
	    	   }
		    withLabel: long_big_mem {
				executor = 'slurm'
				memory = '20G'
				time = '24h'
	    	   }
		    withLabel: short_job {
				executor = 'slurm'
				memory = '12G'
				time = '1h'
	    	   }
		    withLabel: multi_cpu {
				executor = 'slurm'
				memory = '5G'
				time = '6h'
				cpus = 40
	    	   }
		    withLabel: download {
				executor = 'local'
	    	   }
 			withName: FRAGSIZE_PLOT {
        		container = 'atac_R.img'
    			}
        	withName: 'DIFFBIND|GREAT' {
                container = 'atac_R.img'
       			 }
       		 withName: BIGWIG_MERGE {
                container = 'atac_bigwig.img'
       			 }
        	withName: 'ANNOTATEPEAKS|HOMER_FIND_MOTIFS|MEME_MOTIFS_UP|MEME_MOTIFS_DOWN' {
                container = 'atac_annotate.img'
        }

        }
    }
}
